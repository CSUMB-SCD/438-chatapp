<!DOCTYPE html>
<html>

  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  </head>
  
      <body style="background-image: url('http://i0.kym-cdn.com/entries/icons/original/000/002/232/bullet_cat.jpg');
      background-repeat: no-repeat; background-size: 100%; overflow: hidden;" >
      <h1>{{ title }} Chat App</h1>
      
      <div id="chat-area" style="background-color: rgba(255, 255, 255, 0.4);
        position: absolute; overflow-y: auto; float: left; width: 50%; height: 50%;"/>
        <div id="input" style="float: left;">
        <form id="messageForm">
        <textarea id="message" style="position: fixed; top:65%; width: 44%; height: 25px; resize: none; "></textarea>
        <input type="submit" value="Send" style="position: fixed; top: 65%; left: 46%; font-size: 20px;">
        </form>
      </div>
      
    <script>
        var connectionLength = 0;
        document.addEventListener("DOMContentLoaded", function(event) { 
            //alert("hurrah");
            var socket = io.connect(); 
            
            var $messageForm = $("#messageForm"); 
            var $message = $("#message"); 
            var $chat = $("#chat-area"); 
            
            $messageForm.submit(function(e) {
                e.preventDefault(); 
                socket.emit('send message', $message.val()); 
                $message.val(''); 
            }); 
            
            socket.on('new message', function(data) {
            connectionLength = data.length;
            
              console.log("here!!!!"); 
              $chat.append('<div id=user-id>' + data.id + '</div>: <div class=chat-message>' + data.msg + '</div><BR><BR>'); 
             }); 
        }); 
    </script>
    </div>
    <div class="users", style="float: right;">
    <h3> User 1 Information Here! </h3>
    </div>
  </head>
</html>