<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Poppins:800" rel="stylesheet">
  </head>
  <body style="font-family: 'Poppins', sans-serif;background-image: url('http://i0.kym-cdn.com/entries/icons/original/000/002/232/bullet_cat.jpg'); background-repeat: no-repeat;background-size: 100%;overflow: hidden;">
    <h1 style="text-align: center">LIVE CHAT</h1>
    <div id="chat-area"  style="background: rgba(179, 217, 255, 0.6);font-family: 'Poppins', sans-serif; position:fixed;overflow-y: auto; left: 50px; width: 50%; height: 50%;border-style:inset;"/>
        <div id="input" style="float: left;"></div>
    <form id="messageForm">
      <textarea id="message" style="background: rgba(179, 217, 255, 0.6);position: fixed;top: 70%; left: 50px; width: 50%;resize: none;border-style:inset;"></textarea>
      <br>
      <input type="submit" value="Send Message" style="position:fixed; top: 80%;  left: 46%;width:110px;border-radius: 12px;">
    </form>
    
    <script>
        document.addEventListener("DOMContentLoaded", function(event) { 
            //alert("hurrah");
            var socket = io.connect(); 
            
            var $messageForm = $("#messageForm"); 
            var $message = $("#message"); 
            var $chat = $("#chat-area"); 
            
            $messageForm.submit(function(e) {
                e.preventDefault(); 
                socket.emit('send message', $message.val()); 
                $message.val(''); 
            }); 
            
            socket.on('new message', function(data) {
              console.log("here!!!!"); 
              $chat.append('<p style="padding-left: 10px;">' + data.msg + '</p>'); 
            
             }); 
             
        }); 
    </script>
  </body>
</html>
